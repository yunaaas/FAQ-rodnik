from aiogram import types
from aiogram.types import ParseMode
from keyboards import *  # –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º –º–µ—Ç–æ–¥ –¥–ª—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
from users import * 
from faq import *
from states import *
from aiogram.dispatcher import FSMContext
from api import *
from config import API_TOKEN

api_key = API_TOKEN


user_db = UserDB()
faq_db = QuestionAnswerDB()


async def process_faq(callback_query: types.CallbackQuery, state: FSMContext):
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –≤–æ–ø—Ä–æ—Å–æ–≤ (—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
    await callback_query.answer()

    # –ü–æ–ª—É—á–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –≤–æ–ø—Ä–æ—Å–∞–º–∏
    keyboard = get_questions_keyboard()

    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback_query.message.edit_text("<b>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º!</b> \n–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º —á–∞—Å—Ç–æ –∑–∞–¥–∞—é—Ç. \n\n–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –í—ã –Ω–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç–∞, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å ‚Äî <i>–∑–∞–¥–∞–π—Ç–µ –µ–≥–æ</i>, –∏ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ–∂–µ–º! üòä", reply_markup=keyboard, parse_mode=ParseMode.HTML)



async def cmd_start(message: types.Message):
    user = message.from_user

    # –ü–æ–ª—É—á–∞–µ–º –¥–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –µ—Å–ª–∏ –æ–Ω –µ—Å—Ç—å
    birthdate = await get_user_birthdate(api_key, user.id)

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
    user_db.add_user_if_not_exists(user.id, user.first_name, user.last_name, user.username, birthdate)

    # –ü–æ–ª—É—á–∞–µ–º –∏–Ω–ª–∞–π–Ω –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    keyboard = get_start_keyboard()

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –º–µ–Ω—é
    await message.answer(f"–ü—Ä–∏–≤–µ—Ç! –í–æ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è:", reply_markup=keyboard)





async def process_question(callback_query: types.CallbackQuery):
    question = callback_query.data[len("question_"):]

    # –ü–æ–ª—É—á–∞–µ–º –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –≤–æ–ø—Ä–æ—Å –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    answer = faq_db.get_answer(question)

    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
    back_button = InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="faq")
    keyboard = InlineKeyboardMarkup().add(back_button)

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await callback_query.answer("–ú—ã –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å!")  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback_query.message.edit_text(
        text=f"{answer}",  # –û—Ç–≤–µ—Ç —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
        parse_mode=ParseMode.HTML,  # HTML-—Ä–∞–∑–º–µ—Ç–∫–∞
        reply_markup=keyboard  # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
    )




async def ask_own_question(callback_query: types.CallbackQuery, state: FSMContext):
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç –∑–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
    await callback_query.message.edit_text(
        "–û–ø–∏—à–∏—Ç–µ –≤–∞—à –≤–æ–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ. –†–æ–¥–Ω–∏–∫ —É–≤–∏–¥–∏—Ç –µ–≥–æ –∏ –æ—Ç–≤–µ—Ç–∏—Ç –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ! üíôüíå"
    )

    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–Ø –Ω–∞–∂–∞–ª —Å—é–¥–∞ —Å–ª—É—á–∞–π–Ω–æ", –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–Ω–µ—Å–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ
    cancel_button = InlineKeyboardButton(text="üôà –Ø –Ω–∞–∂–∞–ª —Å—é–¥–∞ —Å–ª—É—á–∞–π–Ω–æ", callback_data="cancel_question")
    keyboard = InlineKeyboardMarkup().add(cancel_button)

    # –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
    await callback_query.message.edit_reply_markup(reply_markup=keyboard)

    # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –≤–æ–ø—Ä–æ—Å–∞
    await state.set_state(UserStates.asking_question)  # –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–æ–ø—Ä–æ—Å–∞




async def cancel_question(callback_query: types.CallbackQuery, state: FSMContext):
    # –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –≤ –º–µ–Ω—é –≤–æ–ø—Ä–æ—Å–æ–≤
    await callback_query.message.edit_text("<b>–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º!</b> \n–ó–¥–µ—Å—å —Å–æ–±—Ä–∞–Ω—ã —Å–∞–º—ã–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º —á–∞—Å—Ç–æ –∑–∞–¥–∞—é—Ç. \n\n–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –≤–æ–ø—Ä–æ—Å, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –í—ã –Ω–µ –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç–∞, –Ω–µ —Å—Ç–µ—Å–Ω—è–π—Ç–µ—Å—å ‚Äî <i>–∑–∞–¥–∞–π—Ç–µ –µ–≥–æ</i>, –∏ –º—ã –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–æ–∂–µ–º! üòä", reply_markup=get_questions_keyboard(), parse_mode=ParseMode.HTML)
    await state.finish()  # –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ



async def handle_question(message: types.Message, state: FSMContext):
    if await state.get_state() == UserStates.asking_question.state:
        user = message.from_user

        # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
        await message.forward(chat_id=1012078689)  # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        await message.bot.send_message(
            chat_id=1012078689,
            text=f"–í–û–ü–†–û–°!!!!\n\n–û—Ç: {user.first_name} {user.last_name} @{user.username}, <code>|send |{user.id}|</code>",
            parse_mode=ParseMode.HTML  # –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTML-—Ç–µ–≥–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
        )

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await message.answer("–í–∞—à –≤–æ–ø—Ä–æ—Å –ø—Ä–∏–Ω—è—Ç! –ú—ã –æ—Ç–≤–µ—Ç–∏–º –≤–∞–º –∫–∞–∫ –º–æ–∂–Ω–æ —Å–∫–æ—Ä–µ–µ. üíôüíå", reply_markup=get_start_keyboard())

        # –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        await state.finish()



async def process_back_to_main(callback_query: types.CallbackQuery):
    # –ü–æ–ª—É—á–∞–µ–º –æ—Å–Ω–æ–≤–Ω—É—é –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    keyboard = get_start_keyboard()

    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback_query.answer()
    await callback_query.message.edit_text("–ü—Ä–∏–≤–µ—Ç! –í–æ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã:", reply_markup=keyboard)


async def process_offer(callback_query: types.CallbackQuery, state: FSMContext):
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç —Å–¥–µ–ª–∞—Ç—å –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
    await callback_query.message.edit_text(
        "–û–ø–∏—à–∏—Ç–µ –≤–∞—à–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∏–ª–∏ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ —Ñ–∞–π–ª. –ú—ã —É—á—Ç–µ–º –≤—Å–µ –≤–∞—à–∏ –∏–¥–µ–∏! üí°"
    )

    # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–Ø –Ω–∞–∂–∞–ª —Å—é–¥–∞ —Å–ª—É—á–∞–π–Ω–æ", –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–Ω–µ—Å–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ
    back_button = InlineKeyboardButton(text="üôà –Ø –Ω–∞–∂–∞–ª —Å—é–¥–∞ —Å–ª—É—á–∞–π–Ω–æ", callback_data="offer_error")
    keyboard = InlineKeyboardMarkup().add(back_button)

    # –û–±–Ω–æ–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
    await callback_query.message.edit_reply_markup(reply_markup=keyboard)

    # –û–∂–∏–¥–∞–µ–º, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø–∏—à–µ—Ç —Å–≤–æ–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ
    await state.set_state(UserStates.offer_post)  # –ò—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ –∂–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π

async def handle_offer(message: types.Message, state: FSMContext):
    if await state.get_state() == UserStates.offer_post.state:
        user = message.from_user

        # –ü–µ—Ä–µ—Å—ã–ª–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
        await message.forward(chat_id=1012078689)  # ID –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
        
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
        await message.bot.send_message(
            chat_id=1012078689,
            text=f"–ü–†–ï–î–õ–û–ñ–ö–ê!!! \n\n–û—Ç: {user.first_name} {user.last_name} @{user.username}, <code>|send |{user.id}|</code>",
            parse_mode=ParseMode.HTML  # –ß—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å HTML-—Ç–µ–≥–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏–∏
        )

        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
        await message.answer("–í–∞—à–∞ –∏–¥–µ—è –ø–æ–ª—É—á–µ–Ω–∞! –û–∂–∏–¥–∞–π—Ç–µ, –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–Ω–∞ —Å–∫–æ—Ä–æ –ø–æ—è–≤–∏—Ç—Å—è –≤ –Ω–∞—à–µ–π –≥—Ä—É–ø–ø–µ!üíô", reply_markup=get_start_keyboard())

        # –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
        await state.finish()

async def process_cancel_offer(callback_query: types.CallbackQuery, state: FSMContext):
    # –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
    await callback_query.message.edit_text("–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é.", reply_markup=get_start_keyboard())
    await state.finish()  # –ó–∞–≤–µ—Ä—à–∞–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ


async def process_social(callback_query: types.CallbackQuery):
    # –û—Ç–≤–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
    await callback_query.answer()  # –û—Ç–∫–ª–∏–∫–∞–µ–º—Å—è –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π —Å–æ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–µ—Ç–µ–π
    await callback_query.message.edit_text(
        "–í–æ—Ç –Ω–∞—à–∏ —Å–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–µ—Ç–∏ –∏ —Å–∞–π—Ç. \n–í—ã –º–æ–∂–µ—Ç–µ –ø–µ—Ä–µ–π—Ç–∏ –ø–æ —Å—Å—ã–ª–∫–∞–º, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫–∏!",
        reply_markup=get_social_networks_keyboard()  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å —Å–æ—Ü. —Å–µ—Ç—è–º–∏
    )

async def process_parents(callback_query: types.CallbackQuery):
    # –û—Ç–≤–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
    await callback_query.answer()

    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π
    await callback_query.message.edit_text(
        "–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è –¥–∞—Ç —Å–º–µ–Ω—ã, –º—ã –æ–ø–æ–≤–µ—Å—Ç–∏–º –∫–æ–≥–¥–∞ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. üôè",
        reply_markup=get_parents_keyboard_with_back()  # –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–∞–º–∏
    )

async def process_program(callback_query: types.CallbackQuery):
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    await callback_query.answer("–ú—ã –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å!")  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ª–∞–≥–µ—Ä—è
    message = f"""
<b>‚ö°Ô∏è –û–±–ª–∞—Å—Ç–Ω–∞—è –ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è —Å–º–µ–Ω–∞ –¥–ª—è –æ–¥–∞—Ä–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—à–µ–∫–ª–∞—Å—Å–Ω–∏–∫–æ–≤</b>  
<i>¬´–ò—Å–∫–∞—Ç–µ–ª—å¬ª (–≤–æ–∑—Ä–∞—Å—Ç 14+)</i>

<b>‚ö°Ô∏è –ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</b> –µ–∂–µ–≥–æ–¥–Ω–æ –ø—Ä–æ–≤–æ–¥–∏—Ç –ø—Ä–æ—Ñ–∏–ª—å–Ω—É—é —Å–º–µ–Ω—É –¥–ª—è –æ–¥–∞—Ä–µ–Ω–Ω—ã—Ö —Å—Ç–∞—Ä—à–µ–∫–ª–∞—Å—Å–Ω–∏–∫–æ–≤ <i>¬´–ò—Å–∫–∞—Ç–µ–ª—å¬ª</i> –¥–≤–∞–∂–¥—ã –≤ –≥–æ–¥ ‚Äì –≤ –∞–≤–≥—É—Å—Ç–µ –∏ –¥–µ–∫–∞–±—Ä–µ.  

<b>‚ö°Ô∏è –û—Å–Ω–æ–≤–Ω–æ–π —Ü–µ–ª—å—é —Å–º–µ–Ω—ã —è–≤–ª—è–µ—Ç—Å—è</b> –ª–∏—á–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞–∑–≤–∏—Ç–∏–µ –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏–µ –∑–Ω–∞–Ω–∏–π –≤ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏ –≤ —É—Å–ª–æ–≤–∏—è—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –¥–µ—Ç—Å–∫–æ–≥–æ –∫–æ–ª–ª–µ–∫—Ç–∏–≤–∞ –∏ –≤–æ—Å–ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –ª–∞–≥–µ—Ä—è. 

<b>‚ö°Ô∏è –ö–∞–∂–¥–∞—è –ø—Ä–æ—Ñ–∏–ª—å–Ω–∞—è —Å–º–µ–Ω–∞ –∏–º–µ–µ—Ç —Å–≤–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ,</b> –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ –∏–≥—Ä–æ–≤—É—é –º–æ–¥–µ–ª—å —Å–º–µ–Ω—ã. –ù–∞ –≤—Å–µ—Ö —Å–º–µ–Ω–∞—Ö –≤ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ —Å–º—ã—Å–ª–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ. –ó–¥–µ—Å—å —à–∫–æ–ª—å–Ω–∏–∫–∏ –ø–æ–∑–Ω–∞—é—Ç –Ω–∞—É–∫—É, —Ä–∞–∑–º—ã—à–ª—è—é—Ç –æ –±—É–¥—É—â–µ–º, —É—á–∞—Ç—Å—è –¥—Ä—É–∂–∏—Ç—å, –æ–±—Ä–µ—Ç–∞—é—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É –∏ –¥–æ–≤–µ—Ä–∏–µ –≤–∑—Ä–æ—Å–ª—ã—Ö. <i>–î–µ–≤–∏–∑ –ª–∞–≥–µ—Ä—è</i> -  ¬´–ì–æ—Ä–µ—Ç—å —Å–∞–º–∏–º –∏ –∑–∞–∂–∏–≥–∞—Ç—å –¥—Ä—É–≥–∏—Ö¬ª. 

<b>‚ö°Ô∏è –°–æ–≤–º–µ—Å—Ç–Ω–æ —Å –∫–æ–º–∏—Å—Å–∞—Ä–∞–º–∏ –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–æ–≥–æ –æ–±–ª–∞—Å—Ç–Ω–æ–≥–æ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Ä—è–¥–∞ ¬´–†–æ–¥–Ω–∏–∫¬ª</b> —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–∞—è –∏ –¥–æ—Å—É–≥–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞, –∫–æ—Ç–æ—Ä–∞—è –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–∞–Ω—è—Ç–∏—è –ø–æ —Ä–∞–∑–ª–∏—á–Ω—ã–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è–º –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, –∞ —Ç–∞–∫–∂–µ —Å—é–∂–µ—Ç–Ω–æ-—Ä–æ–ª–µ–≤—ã–µ –∏–≥—Ä—ã, –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏ –∫–æ–Ω–∫—É—Ä—Å–Ω—ã–µ —à–æ—É-–ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–µ–∞—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–µ—á–µ—Ä–Ω–∏–µ —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ –¥–µ–ª–∞.   
"""

    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
    back_button = InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back_to_parents")
    keyboard = InlineKeyboardMarkup().add(back_button)

    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback_query.message.edit_text(
        text=message,  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ–≥—Ä–∞–º–º–µ –ª–∞–≥–µ—Ä—è
        parse_mode=ParseMode.HTML,  # HTML-—Ä–∞–∑–º–µ—Ç–∫–∞
        reply_markup=keyboard  # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
    )




async def process_schools(callback_query: types.CallbackQuery):
    # –û—Ç–≤–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
    await callback_query.answer("–ú—ã –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å!")

    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã—Ö —à–∫–æ–ª–∞—Ö
    message = f"""
<b>‚ö°Ô∏è –ù–∞ –∑–∞–Ω—è—Ç–∏—è—Ö –≤ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã—Ö —à–∫–æ–ª–∞—Ö</b> —Ä–µ–±—è—Ç–∞ –≤–º–µ—Å—Ç–µ —Å –ø–µ–¥–∞–≥–æ–≥–∞–º–∏ –≥–æ–≤–æ—Ä—è—Ç –æ –∑–∞—â–∏—Ç–µ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Å–µ—Ç–∏ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç, —Å–ø–æ—Ä—è—Ç –æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –∏—Å–∫—É—Å—Å—Ç–≤–µ, –∑–Ω–∞–∫–æ–º—è—Ç—Å—è —Å –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç–µ–ª—å—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Ä–∞—Å—Å—É–∂–¥–∞—é—Ç –æ–± –∏—Å—Ç–æ—Ä–∏–∏ –≤–æ–æ—Ä—É–∂–µ–Ω–∏—è –∏ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤, –∫–∞—Å–∞—é—Ç—Å—è –≤–æ–ø—Ä–æ—Å–æ–≤ —ç–∫–æ–ª–æ–≥–∏–∏ –∏ –±–∏–æ–ª–æ–≥–∏–∏, –¥–µ–ª—è—Ç—Å—è –æ–ø—ã—Ç–æ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–æ–±—Ä–æ–≤–æ–ª—å—á–µ—Å–∫–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤.

<b>‚ö°Ô∏è –ú–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å—ã –∏—Å–∫–∞—Ç–µ–ª–µ–π</b> –¥–ª—è —Å–≤–æ–∏—Ö —Å–≤–µ—Ä—Å—Ç–Ω–∏–∫–æ–≤ –≤—Å–µ–≥–¥–∞ –Ω–µ –º–µ–Ω–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã: –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ –æ–ª–∏–º–ø–∏–∞–¥–∞–º, –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞, –∂–∏–≤–æ–ø–∏—Å—å, —Ç–µ–∞—Ç—Ä, –∏–≥—Ä–∞ –Ω–∞ –≥–∏—Ç–∞—Ä–µ –∏ –¥—Ä. üé∏üé®üìö
"""


    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
    back_button = InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back_to_parents")
    keyboard = InlineKeyboardMarkup().add(back_button)

    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback_query.message.edit_text(
        text=message,  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø—Ä–æ—Ñ–∏–ª—å–Ω—ã—Ö —à–∫–æ–ª–∞—Ö
        parse_mode=ParseMode.HTML,  # HTML-—Ä–∞–∑–º–µ—Ç–∫–∞
        reply_markup=keyboard  # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
    )


async def process_teachers(callback_query: types.CallbackQuery):
    # –û—Ç–≤–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏
    await callback_query.answer("–ú—ã –Ω–∞—à–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –≤–∞—à –≤–æ–ø—Ä–æ—Å!")

    # –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–∞–≤–µ
    message = f"""
<b>‚ö°Ô∏è –ü–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–∏–π —Å–æ—Å—Ç–∞–≤ –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–æ–≥–æ –æ–±–ª–∞—Å—Ç–Ω–æ–≥–æ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –æ—Ç—Ä—è–¥–∞ ¬´–†–æ–¥–Ω–∏–∫¬ª</b> –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –≤—ã—Å–æ–∫–æ–∫–≤–∞–ª–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–≤ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–∞–±–æ—Ç—ã. –ö–∞–∂–¥—ã–π –ø–µ–¥–∞–≥–æ–≥ –∏–º–µ–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–µ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π <i>—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –≤–æ–∂–∞—Ç–æ–≥–æ</i>. üìú

<b>‚ö°Ô∏è –ü–µ–¥–∞–≥–æ–≥–∏</b> –ø—Ä–æ—Ö–æ–¥—è—Ç —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –∫—É—Ä—Å—ã –ø–æ–≤—ã—à–µ–Ω–∏—è –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –º–µ—Ç–æ–¥–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏—è—Ö –∏ —Å–µ–º–∏–Ω–∞—Ä–∞—Ö. üßë‚Äçüè´

–ö—Ä–æ–º–µ —Ç–æ–≥–æ, –ø–µ–¥–∞–≥–æ–≥–∏ –æ—Ç—Ä—è–¥–∞ –∞–∫—Ç–∏–≤–Ω–æ —É—á–∞—Å—Ç–≤—É—é—Ç –≤ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–∏ –º–∞—Å—Ç–µ—Ä-–∫–ª–∞—Å—Å–æ–≤, –∞ —Ç–∞–∫–∂–µ –≤ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏ –¥–æ—Å—É–≥–æ–≤—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º –¥–ª—è —Å—Ç–∞—Ä—à–µ–∫–ª–∞—Å—Å–Ω–∏–∫–æ–≤. üé®üé≠

–ö–æ–º–∏—Å—Å–∞—Ä—ã ¬´–†–æ–¥–Ω–∏–∫–∞¬ª —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ç–µ—Å–Ω–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–µ —Å <b>–í–ª–∞–¥–∏–º–∏—Ä—Å–∫–∏–º –∏–Ω—Å—Ç–∏—Ç—É—Ç–æ–º —Ä–∞–∑–≤–∏—Ç–∏—è –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è</b> –∏ <b>–ú–∏–Ω–∏—Å—Ç–µ—Ä—Å—Ç–≤–æ–º –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –í–ª–∞–¥–∏–º–∏—Ä—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏</b>, —á—Ç–æ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –∏—Ö –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º–∞ –∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –∏–Ω–Ω–æ–≤–∞—Ü–∏—è–º –≤ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. üè´

–û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å –≤ –ª–∞–≥–µ—Ä–µ ¬´–ò—Å–∫–∞—Ç–µ–ª—å¬ª —Å—Ç—Ä–æ–∏—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –∏ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—ã—Ç–∞, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞–∂–¥–æ–º—É —Ä–µ–±–µ–Ω–∫—É —Ä–∞—Å–∫—Ä—ã—Ç—å —Å–≤–æ–π –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª, —Ä–∞–∑–≤–∏–≤–∞—Ç—å —Ç–≤–æ—Ä—á–µ—Å–∫–∏–µ –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏. üå±
"""


    # –°–æ–∑–¥–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É —Å –∫–Ω–æ–ø–∫–æ–π "–ù–∞–∑–∞–¥"
    back_button = InlineKeyboardButton(text="üîô –ù–∞–∑–∞–¥", callback_data="back_to_parents")
    keyboard = InlineKeyboardMarkup().add(back_button)

    # –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await callback_query.message.edit_text(
        text=message,  # –°–æ–æ–±—â–µ–Ω–∏–µ –æ –ø–µ–¥–∞–≥–æ–≥–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–∞–≤–µ
        parse_mode=ParseMode.HTML,  # HTML-—Ä–∞–∑–º–µ—Ç–∫–∞
        reply_markup=keyboard  # –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
    )

async def process_back_to_parents(callback_query: types.CallbackQuery):
    # –û—Ç–≤–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ "–ù–∞–∑–∞–¥"
    await callback_query.answer("–í—ã –≤–µ—Ä–Ω—É–ª–∏—Å—å –Ω–∞–∑–∞–¥!")

    # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–∞–∑–¥–µ–ª –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π
    await callback_query.message.edit_text(
        "–≠—Ç–æ—Ç —Ä–∞–∑–¥–µ–ª –±—É–¥–µ—Ç –ø–æ–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–æ –º–µ—Ä–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏—è –¥–∞—Ç —Å–º–µ–Ω—ã, –º—ã –æ–ø–æ–≤–µ—Å—Ç–∏–º, –∫–æ–≥–¥–∞ –±—É–¥—É—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è. üôè",
        reply_markup=get_parents_keyboard_with_back()  # –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É –¥–ª—è —Ä–æ–¥–∏—Ç–µ–ª–µ–π
    )


def register_user_handlers(dp):
    dp.register_message_handler(cmd_start, commands=['start'])
    dp.register_callback_query_handler(process_question, lambda c: c.data and c.data.startswith('question_'))
    dp.register_callback_query_handler(process_faq, lambda c: c.data == "faq")
    dp.register_callback_query_handler(process_back_to_main, lambda c: c.data == "back_to_main")
    dp.register_callback_query_handler(cancel_question, lambda c: c.data == "cancel_question", state=UserStates.asking_question)
    dp.register_message_handler(handle_question, content_types=["any"], state=UserStates.asking_question)
    dp.register_callback_query_handler(ask_own_question, lambda c: c.data == "ask_own_question")
    dp.register_message_handler(handle_offer, content_types=["any"], state=UserStates.offer_post)
    dp.register_callback_query_handler(process_cancel_offer, lambda c: c.data == "offer_error", state=UserStates.offer_post)
    dp.register_callback_query_handler(process_offer, lambda c: c.data == "offer")
    dp.register_callback_query_handler(process_social, lambda c: c.data == "social")
    dp.register_callback_query_handler(process_parents, lambda c: c.data == "parrents")
    dp.register_callback_query_handler(process_program, lambda c: c.data == "parents_program")
    dp.register_callback_query_handler(process_schools, lambda c: c.data == "parents_schools")
    dp.register_callback_query_handler(process_teachers, lambda c: c.data == "parents_teachers")
    dp.register_callback_query_handler(process_back_to_parents, lambda c: c.data == "back_to_parents")